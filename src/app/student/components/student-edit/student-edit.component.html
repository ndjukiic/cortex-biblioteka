<div class="pt-1.5 flex flex-row justify-between items-center">
  <div class="flex flex-col pl-[32px]">
    <div>
      <h1>Izmjeni podatke</h1>
    </div>
    <div>
      <nav class="w-full rounded">
        <ol class="flex list-reset">
          <li>
            <a routerLink="../../" class="text-[#2196f3] hover:text-blue-600">
              Svi učenici
            </a>
          </li>
          <li>
            <span class="mx-2">/</span>
          </li>
          <li class="text-gray-400">Izmjeni podatke</li>
        </ol>
      </nav>
    </div>
  </div>
</div>
<hr class="ml-[-25px] mt-[7px]" />

<div class="height-scroll overflow-y-auto">
  <form
    [formGroup]="studentEditForm"
    (ngSubmit)="onSubmit()"
    class="text-gray-700 text-[14px] forma"
  >
    <div class="flex flex-row ml-[30px]">
      <div class="w-[50%] mb-[100px]">
        <div class="mt-[20px]">
          <label for="nameAndSurname"
            >Ime i prezime <span class="text-red-500">*</span></label
          >
          <input
            type="text"
            name="nameAndSurname"
            id="nameAndSurname"
            formControlName="nameAndSurname"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('nameAndSurname').valid &&
              studentEditForm.get('nameAndSurname').touched
            "
            class="text-red-500 pt-1 block"
          >
            <div
              *ngIf="
              studentEditForm.get('nameAndSurname').errors['minimumTwoWords']
              "
            >
              *Polje mora sadržati najmanje dvije riječi!
            </div>
            <div *ngIf="studentEditForm.get('nameAndSurname').errors['pattern']">
              *Polje može sadržati samo slova i razmake!
            </div>
            <div
              *ngIf="studentEditForm.get('nameAndSurname').errors['required']"
            >
              *Ovo polje je obavezno!
            </div>
          </span>
        </div>

        <div class="mt-[20px]">
          <label for="userType">Tip korisnika</label>
          <select
            class="flex w-[90%] mt-2 px-2 py-2 border bg-gray-300 border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
            name="userType"
            id="userType"
            formControlName="userType"
          >
            <option value="Učenik">Učenik</option>
          </select>
        </div>

        <div class="mt-[20px]">
          <label for="jmbg">JMBG <span class="text-red-500">*</span></label>
          <input
            type="text"
            name="jmbg"
            id="jmbg"
            formControlName="jmbg"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('jmbg').valid &&
              studentEditForm.get('jmbg').touched
            "
            class="text-red-500 pt-1"
            >Ovo polje je obavezno!</span
          >
        </div>

        <div class="mt-[20px]">
          <label for="email">E-mail <span class="text-red-500">*</span></label>
          <input
            type="email"
            name="email"
            id="email"
            formControlName="email"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('email').valid &&
              studentEditForm.get('email').touched
            "
            class="text-red-500 pt-1"
          >
            <div *ngIf="studentEditForm.get('email').errors['required']">
              *Ovo polje je obavezno!
            </div>
            <div *ngIf="studentEditForm.get('email').errors['email']">
              *Unesite validnu email adresu!
            </div>
          </span>
        </div>

        <div class="mt-[20px]">
          <label for="username"
            >Korisnicko ime <span class="text-red-500">*</span></label
          >
          <input
            type="text"
            name="username"
            id="username"
            formControlName="username"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('username').valid &&
              studentEditForm.get('username').touched
            "
            class="text-red-500 pt-1"
          >
            <div *ngIf="studentEditForm.get('username').errors['required']">
              *Ovo polje je obavezno!
            </div>
            <div *ngIf="studentEditForm.get('username').errors['minlength']">
              *Korisničko ime mora imati najmanje 3 karaktera.
            </div>
            <div *ngIf="studentEditForm.get('username').errors['maxlength']">
              *Korisničko ime ne smije biti duže od 20 karaktera.
            </div>
            <div *ngIf="studentEditForm.get('username').errors['pattern']">
              *Dozvoljeni karakteri su slova, brojevi, crte i donje crte!
            </div>
          </span>
        </div>

        <div class="mt-[20px]">
          <label for="password"
            >Šifra <span class="text-red-500">*</span></label
          >
          <input
            type="password"
            name="password"
            id="password"
            formControlName="password"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('password').valid &&
              studentEditForm.get('password').touched
            "
            class="text-red-500 pt-1"
          >
            <div *ngIf="studentEditForm.get('password').errors['required']">
              *Ovo polje je obavezno!
            </div>
            <div *ngIf="studentEditForm.get('password').errors['minlength']">
              *Šifra mora sadržati najmanje 8 karaktera!
            </div>
          </span>
        </div>

        <div class="mt-[20px]">
          <label for="confirmPassword"
            >Ponovi šifru <span class="text-red-500">*</span></label
          >
          <input
            type="password"
            name="confirmPassword"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="flex w-[90%] mt-2 px-2 py-2 text-base bg-white border border-gray-300 shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-[#576cdf]"
          />
          <span
            *ngIf="
              !studentEditForm.get('confirmPassword').valid &&
              studentEditForm.get('confirmPassword').touched
            "
            class="text-red-500 pt-1"
          >
            <div
              *ngIf="studentEditForm.get('confirmPassword').errors['required']"
            >
              *Ovo polje je obavezno!
            </div>
            <div
              *ngIf="
              studentEditForm.get('confirmPassword').errors['passwordMismatch']
              "
            >
              *Šifre se ne podudaraju!
            </div>
          </span>
        </div>
      </div>

      <div class="mt-[50px]">
        <label for="userImage" class="cursor-pointer">
          <div id="empty-cover-art" class="w-48 h-48 py-4 text-center border-2 border-gray-300 border-solid relative flex flex-col justify-center items-center">
            <div class="image-container absolute inset-0">
              <img [src]="selectedImagePreviewUrl || (student ? student.photoPath : null)" alt="Slika" class="w-full h-full object-cover" />
            </div>
            <svg
              class="mx-auto feather feather-image"
              xmlns="http://www.w3.org/2000/svg"
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <span class="px-4 py-2 leading-normal">Add photo</span>
          </div>
        </label>
        <input
          type="file"
          class="hidden"
          id="userImage"
          name="userImage"
          accept="image/*"
          (change)="displaySelectedImage($event)"
        />
      </div>

      <div class="absolute bottom-0 w-full">
        <div class="flex flex-row">
          <div
            class="inline-block w-full text-right py-[7px] mr-[100px] text-white px-[30px]"
          >
            <button
              type="button"
              class="btn-animation shadow-lg mr-[15px] w-[150px] focus:outline-none text-sm py-2.5 px-5 transition duration-300 ease-in bg-[#F44336] hover:bg-[#F55549] rounded-[5px]"
              (click)="onCancel()"
              >
              Poništi <i class="fas fa-times ml-[4px]"></i>
            </button>
            <button
              id="save"
              type="submit"
              class="btn-animation shadow-lg w-[150px] disabled:opacity-50 focus:outline-none text-sm py-2.5 px-5 transition duration-300 ease-in rounded-[5px] hover:bg-[#46A149] bg-[#4CAF50]"
              [disabled]="!studentEditForm.valid"
              (click)="uploadToS3()"
            >
              Sačuvaj <i class="fas fa-check ml-[4px]"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

